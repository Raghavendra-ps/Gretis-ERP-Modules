import{_ as T}from"./TextEditor.vue_vue_type_script_setup_true_lang-50235d44.js";import{_ as R,x as l,o as d,b as r,a as i,t as b,j as a,p as w,w as h,f as y,ad as f,h as x,as as N,I as k,l as v,aG as g}from"./index-683cf2d0.js";import{T as I,a as V}from"./TextEditor-2f395107.js";import"./notification-bcfdfaa4.js";import"./error-95942cf5.js";import"./iconify-ab660f87.js";import"./UserAvatar.vue_vue_type_script_setup_true_lang-f84b967c.js";import"./Avatar.vue_vue_type_script_setup_true_lang-3a9f1ac4.js";const A={name:"ResponseTitleAndMessage",props:["title","message","editable","responseResource"],components:{TextEditor:I,TextEditorFixedMenu:V},mounted(){this.saveResponseTitleAndMessage=this.save},watch:{tempNewTitle(e){this.updateNewResponseInput({field:"title",value:e})},tempNewMessage(e){this.updateNewResponseInput({field:"message",value:e})}},setup(e){const s=l(e.title),n=l(e.message),t=f("editMode"),p=f("updateNewResponseInput"),o=f("saveResponseTitleAndMessage");return{tempNewTitle:s,tempNewMessage:n,editMode:t,updateNewResponseInput:p,saveResponseTitleAndMessage:o}},computed:{textEditorMenuButtons(){return["Paragraph",["Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Separator","Bold","Italic","Separator","Bullet List","Numbered List","Separator","Align Left","Align Center","Align Right","Separator","Image","Video","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"]}},methods:{save(){this.responseResource.setValue.submit({title:this.tempNewTitle,message:this.tempNewMessage}),this.editMode=!1}}},$={key:0,class:"flex flex-col space-y-[16px] rounded-[8px] border shadow-sm p-[32px]"},B={class:"font-semibold text-[24px] prose prose-p:my-1 border-b pb-[16px] mb-[10px]"},E=["innerHTML"],H={key:1},F={class:"flex flex-col space-y-[16px] h-full"},D={class:"flex flex-col"},S={key:0,class:"mb-2 block text-sm leading-4 text-gray-700"},L={key:0};function j(e,s,n,t,p,o){const u=x("Input"),m=x("TextEditorFixedMenu"),c=T;return d(),r("div",null,[n.editable?(d(),r("div",H,[i("div",F,[i("div",null,[a(u,{label:"Title",type:"text",value:n.title,onInput:s[0]||(s[0]=_=>{t.tempNewTitle=_})},null,8,["value"])]),i("div",D,[t.editMode?(d(),r("div",S," Message ")):w("",!0),a(c,{class:y(t.editMode?"bg-gray-100":""),ref:"textEditor","editor-class":n.editable?t.editMode?"min-h-[20rem] overflow-y-auto max-h-[73vh] px-3 max-w-full":"min-h-[20rem] overflow-y-auto max-h-[85vh]":"flex flex-col",content:n.message,"starterkit-options":{heading:{levels:[2,3,4,5,6]}},onChange:s[1]||(s[1]=_=>{t.tempNewMessage=_}),editable:t.editMode},{top:h(()=>[t.editMode?(d(),r("div",L,[a(m,{class:"m-3 overflow-x-auto",buttons:o.textEditorMenuButtons},null,8,["buttons"])])):w("",!0)]),_:1},8,["class","editor-class","content","editable"])])])])):(d(),r("div",$,[i("div",B,b(n.title),1),i("div",{class:"overflow-y-auto",style:{"min-height":"calc(100vh - 500px)","max-height":"calc(100vh - 245px)"},innerHTML:n.message},null,8,E)]))])}const M=R(A,[["render",j]]),z={name:"CannedResponseInfo",components:{FeatherIcon:N,Input:k,ResponseTitleAndMessage:M},props:["canned_response"],setup(e){const s=l(!1),n=l({}),t=l(c=>{n.value[c.field]=c.value});g("updateNewResponseInput",t),g("newResponseTempValues",n);const p=l(()=>{});g("saveResponseTitleAndMessage",p);const o=l(""),u=l(!1),m=l(!e.canned_response);return g("editMode",m),{editingName:s,tempCannedResponseName:o,updatingValues:u,editMode:m,newResponseTempValues:n,saveResponseTitleAndMessage:p}},computed:{cannedResponseDoc(){return this.$resources.cannedResponse.doc||null},values(){return this.updatingValues?this.values||null:{cannedResponseName:this.cannedResponseDoc?.title||null,message:this.cannedResponseDoc?.message||null}}},deactivated(){this.resetForm()},resources:{cannedResponse(){return{type:"document",doctype:"HD Canned Response",name:this.canned_response,setValue:{onSuccess:()=>{this.$toast({title:"Canned Response Updated.",icon:"check",iconClasses:"text-green-500"})},onError:e=>{this.$toast({title:"Error while updating canned response",text:e,icon:"x",iconClasses:"text-red-500"})}}}}},methods:{resetForm(){this.editingName=!1,this.tempCannedResponseName=this.values.cannedResponseName},save(){this.updatingValues=!0;const e=this.values;this.$resources.user.setValue.submit({title:e.title,message:e.message}).then(()=>{this.$resources.cannedResponse.setValue.submit({title:this.tempCannedResponseName})})},saveResponse(){const e={title:this.newResponseTempValues.title,message:this.newResponseTempValues.message};this.$resources.cannedResponse.setValue.submit({...e}),this.editMode=!1},cancel(){this.$router.go()}}},P={class:"min-w-[490px] px-[24px] py-[10px]"},U={class:"flow-root h-[72px] shrink-0 py-[22px] px-[16px]"},q={class:"float-left"},G=i("div",null,"Back to response list",-1),J={class:"float-right"},K={key:0,class:"flex flex-row space-x-2"},O={key:1,class:"flex flex-row space-x-2"},Q={class:"flex h-full flex-row space-x-[24px] border-t px-[16px] py-[22px]"};function W(e,s,n,t,p,o){const u=x("FeatherIcon"),m=x("RouterLink"),c=x("Button"),_=M;return d(),r("div",P,[i("div",U,[i("div",q,[a(m,{to:"/canned-responses",class:"my-1 flex select-none flex-row items-center space-x-1 stroke-gray-600 text-sm text-gray-600 hover:stroke-gray-700 hover:text-gray-700",role:"button"},{default:h(()=>[a(u,{name:"arrow-left",class:"h-[13px] w-[13px]"}),G]),_:1})]),i("div",J,[t.editMode?(d(),r("div",O,[a(c,{appearance:"secondary",onClick:s[1]||(s[1]=()=>{e.$router.go()})},{default:h(()=>[v(" Cancel ")]),_:1}),a(c,{appearance:"primary",onClick:s[2]||(s[2]=ee=>o.saveResponse())},{default:h(()=>[v(" Save ")]),_:1})])):(d(),r("div",K,[a(c,{appearance:"secondary",onClick:s[0]||(s[0]=()=>{t.editMode=!0,e.newAResponseTempValues={title:o.cannedResponseDoc.title,message:o.cannedResponseDoc.message}})},{default:h(()=>[v("Edit")]),_:1})]))])]),i("div",Q,[a(_,{class:"grow",title:o.values?.cannedResponseName,message:o.values?.message,editable:t.editMode,"response-resource":e.$resources.cannedResponse},null,8,["title","message","editable","response-resource"])])])}const C=R(z,[["render",W]]),X={name:"CannedResponse",components:{CannedResponseInfo:C},props:["id"],mounted(){this.$event.emit("set-selected-setting","Canned Responses"),this.$event.emit("show-top-panel-actions-settings","CannedResponse")}},Y={class:"flex flex-col"};function Z(e,s,n,t,p,o){const u=C;return d(),r("div",Y,[a(u,{class:"shrink-0 border-r border-[#F4F5F6]",canned_response:n.id},null,8,["canned_response"])])}const re=R(X,[["render",Z]]);export{re as default};
//# sourceMappingURL=CannedResponseSingle-16007ef2.js.map
