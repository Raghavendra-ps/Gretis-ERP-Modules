import{q as U,al as I,x as l,am as R,an as T,C as G,o as c,b as f,j as a,w as i,y as e,c as V,F as L,d as q,B as b,a as r,i as p,t as w,ah as y,D as E,E as H,M,G as O,ao as F}from"./index-683cf2d0.js";import{f as K}from"./notification-bcfdfaa4.js";import{u as S}from"./error-95942cf5.js";import{_ as P}from"./plus-95486e06.js";import{_ as j}from"./HCard.vue_vue_type_script_setup_true_lang-d4d6cfbb.js";import{_ as W}from"./EmptyMessage.vue_vue_type_script_setup_true_lang-84e0b3e7.js";import"./iconify-ab660f87.js";import{_ as Y}from"./KnowledgeBaseCategoryHeader.vue_vue_type_script_setup_true_lang-8f8ef156.js";import{_ as z}from"./KnowledgeBaseIconSelector.vue_vue_type_script_setup_true_lang-17a07f3f.js";import{I as J}from"./edit-3-0cc4c723.js";import"./util-b44535a3.js";const Q={class:"flex grow flex-col"},X={class:"space-x-2"},Z={key:1,class:"gap-4.5 grid grid-cols-3 px-5"},ee={class:"text-base text-gray-600"},te={class:"space-y-4"},oe={class:"space-y-2"},ae=r("div",{class:"text-xs text-gray-700"},"Title",-1),se={class:"flex items-center gap-2"},re={class:"space-y-2"},le=r("div",{class:"text-xs text-gray-700"},"Description",-1),ie={class:"space-y-4"},Ce=U({__name:"KnowledgeBaseCategory",props:{categoryId:{type:String,required:!0}},setup(k){const h=k,D=M(),C=I(h,"categoryId"),d=l(""),g=l(""),n=l(!1),N=l(""),A=l(""),_=l(""),u=l(!1),s=R({doctype:"HD Article Category",name:C.value,auto:!0,setValue:{onSuccess(){T({title:"Category updated",icon:"check",iconClasses:"text-green-500"})},onError:S({title:"Error updating category"})}}),$=O(()=>s.setValue.submit({category_name:N.value||s.doc.category_name,description:A.value||s.doc.description,icon:_.value||s.doc.icon}),500),x=G({url:"frappe.client.insert",debounce:500,makeParams(){return{doc:{doctype:"HD Article Category",category_name:d.value,description:g.value,parent_category:s.doc?.name}}},validate(m){if(b.isEmpty(m.doc.category_name))return"Category name is required"},onSuccess(){n.value=!1,v.reload()},onError:S({title:"Error creating sub category"})}),v=K({doctype:"HD Article Category",filters:{parent_category:C.value},auto:!0});function B(m){D.push({name:F,params:{subCategoryId:m}})}return(m,o)=>(c(),f("div",Q,[a(Y,{title:e(s).doc?.category_name,description:e(s).doc?.description},{right:i(()=>[r("div",X,[a(e(p),{label:"Edit",theme:"gray",variant:"outline",onClick:o[0]||(o[0]=t=>u.value=!u.value)},{prefix:i(()=>[a(e(J),{class:"h-4 w-4"})]),_:1}),a(e(p),{label:"Add new",theme:"gray",variant:"solid",onClick:o[1]||(o[1]=t=>n.value=!n.value)},{prefix:i(()=>[a(e(P),{class:"h-4 w-4"})]),_:1})])]),_:1},8,["title","description"]),e(b.isEmpty)(e(v).data)?(c(),V(W,{key:0,message:"This category is empty"})):(c(),f("div",Z,[(c(!0),f(L,null,q(e(v).data,t=>(c(),V(e(j),{key:t.name,description:t.description,title:t.category_name,class:"w-full place-self-center",onClick:ne=>B(t.name)},{bottom:i(()=>[r("div",ee,w(t.count_article?t.count_article:"No")+" "+w(t.count_article>1?"articles":"article"),1)]),_:2},1032,["description","title","onClick"]))),128))])),a(e(E),{modelValue:u.value,"onUpdate:modelValue":o[5]||(o[5]=t=>u.value=t),options:{title:"Edit"}},{"body-content":i(()=>[r("div",te,[r("div",oe,[ae,r("div",se,[a(z,{icon:_.value||e(s).doc?.icon,onSelect:o[2]||(o[2]=t=>_.value=t)},null,8,["icon"]),a(e(y),{modelValue:e(s).doc.category_name,"onUpdate:modelValue":o[3]||(o[3]=t=>e(s).doc.category_name=t),placeholder:"A brief guide",type:"text"},null,8,["modelValue"])])]),r("div",re,[le,a(e(y),{modelValue:e(s).doc.description,"onUpdate:modelValue":o[4]||(o[4]=t=>e(s).doc.description=t),placeholder:"A short description",type:"textarea"},null,8,["modelValue"])]),a(e(p),{class:"w-full",label:"Save",theme:"gray",variant:"solid",onClick:e($)},null,8,["onClick"])])]),_:1},8,["modelValue"]),a(e(E),{modelValue:n.value,"onUpdate:modelValue":o[9]||(o[9]=t=>n.value=t),options:{title:"New Sub category"}},{"body-content":i(()=>[r("form",{onSubmit:o[8]||(o[8]=H((...t)=>e(x).submit&&e(x).submit(...t),["prevent"]))},[r("div",ie,[a(e(y),{modelValue:d.value,"onUpdate:modelValue":o[6]||(o[6]=t=>d.value=t),type:"text",label:"Name",placeholder:"Name"},null,8,["modelValue"]),a(e(y),{modelValue:g.value,"onUpdate:modelValue":o[7]||(o[7]=t=>g.value=t),type:"textarea",label:"Description",placeholder:"Description"},null,8,["modelValue"]),a(e(p),{disabled:e(b.isEmpty)(d.value),class:"w-full",label:"Create",theme:"gray",variant:"solid"},null,8,["disabled"])])],32)]),_:1},8,["modelValue"])]))}});export{Ce as default};
//# sourceMappingURL=KnowledgeBaseCategory-307f2c45.js.map
