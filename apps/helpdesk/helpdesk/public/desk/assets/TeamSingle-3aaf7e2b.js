import{q as O,x as y,am as L,W as x,A as k,o as i,b as m,a as l,j as a,w as r,y as e,F as E,d as C,t as D,aq as I,M as U,i as u,B as q,c as P,ah as G,D as h,C as H,au as j}from"./index-683cf2d0.js";import{_ as z}from"./Avatar.vue_vue_type_script_setup_true_lang-3a9f1ac4.js";import{D as F}from"./Dropdown-cb3c7d7d.js";import{u as W,_ as X}from"./agent-7e67ee1f.js";import{u as V}from"./error-95942cf5.js";import"./notification-bcfdfaa4.js";import{_ as J,I as K}from"./more-horizontal-09e3374d.js";import{_ as Q}from"./plus-95486e06.js";import{I as Y}from"./x-227748d1.js";import{_ as Z}from"./PageTitle.vue_vue_type_script_setup_true_lang-f25ecf72.js";import"./iconify-ab660f87.js";import"./label-f823d750.js";const ee={class:"flex flex-col"},te={class:"flex items-center gap-2"},se={class:"my-6"},ae={class:"container"},oe={class:"space-y-4"},le=l("div",{class:"text-lg font-medium"},"Members",-1),ne={key:0,class:"flex flex-wrap gap-2"},re={key:1,class:"text-base text-gray-900"},ie={class:"space-y-2"},de={class:"space-y-2"},me={class:"flex items-center gap-2"},ue={class:"text-base"},ke=O({__name:"TeamSingle",props:{teamId:{type:String,required:!0}},setup(c){const b=c,w=U(),T=W(),p=y(!1),_=y(!1),f=y(!1),o=L({doctype:"HD Team",name:b.teamId,auto:!0,setValue:{onError:V({title:"Error updating team"})},delete:{onSuccess(){w.replace({name:x})},onError:V({title:"Error deleting team"})}}),d=k({get(){return o.doc?.name},set(n){o.doc.name=n}}),v=k({get(){return!!o.doc?.ignore_restrictions},set(n){o.doc&&o.setValue.submit({ignore_restrictions:n})}}),A=[{label:"Rename",icon:"edit-3",onClick:()=>p.value=!p.value},{label:"Delete",icon:"trash-2",onClick:()=>_.value=!_.value}],M={title:"Rename team"},R={title:"Add member"},$={title:"Delete team",message:`Are you sure you want to delete ${b.teamId}? This action cannot be reversed!`,actions:[{label:"Confirm",theme:"red",variant:"solid",onClick:()=>o.delete.submit()}]};function S(){H({url:"frappe.client.rename_doc",makeParams(){return{doctype:"HD Team",old_name:b.teamId,new_name:d.value}},validate(s){if(!s.new_name)return"New title is required";if(s.new_name===s.old_name)return"New and old title cannot be same"},onSuccess(){w.replace({name:j,params:{teamId:d.value}})},onError:V({title:"Error renaming team"})}).submit()}function N(n){const s=o.doc.users.concat([{user:n}]);o.setValue.submit({users:s})}function B(n){const s=o.doc.users.filter(t=>t.user!==n);o.setValue.submit({users:s})}return(n,s)=>(i(),m("span",null,[l("div",ee,[a(e(Z),{class:"border-b"},{title:r(()=>[a(e(J),{items:[{label:"Teams",route:{name:e(x)}},{label:c.teamId}]},null,8,["items"])]),right:r(()=>[l("div",te,[a(e(u),{label:"Add member",theme:"gray",variant:"solid",onClick:s[0]||(s[0]=t=>f.value=!f.value)},{prefix:r(()=>[a(e(Q),{class:"h-4 w-4"})]),_:1}),a(e(F),{options:A},{default:r(()=>[a(e(u),{variant:"ghost"},{icon:r(()=>[a(e(K),{class:"h-4 w-4"})]),_:1})]),_:1})])]),_:1}),l("div",se,[l("div",ae,[l("div",oe,[le,e(q.isEmpty)(e(o).doc?.users)?(i(),m("div",re," No members found in team: "+D(c.teamId),1)):(i(),m("div",ne,[(i(!0),m(E,null,C(e(o).doc?.users,t=>(i(),P(e(u),{key:t.name,label:t.user,disabled:e(o).loading,theme:"gray",variant:"outline",onClick:g=>B(t.user)},{suffix:r(()=>[a(e(Y),{class:"h-3 w-3"})]),_:2},1032,["label","disabled","onClick"]))),128))])),a(e(X),{modelValue:e(v),"onUpdate:modelValue":s[1]||(s[1]=t=>I(v)?v.value=t:null),size:"md",label:"Bypass restrictions",description:"Members of this team will be able to bypass any team-wise restriction",class:"rounded border p-4"},null,8,["modelValue"])])])])]),a(e(h),{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=t=>p.value=t),options:M},{"body-content":r(()=>[l("div",ie,[a(e(G),{modelValue:e(d),"onUpdate:modelValue":s[2]||(s[2]=t=>I(d)?d.value=t:null),label:"Title",placeholder:"Product Experts"},null,8,["modelValue"]),a(e(u),{label:"Confirm",theme:"gray",variant:"solid",class:"w-full",disabled:e(d)===c.teamId,onClick:S},null,8,["disabled"])])]),_:1},8,["modelValue"]),a(e(h),{modelValue:_.value,"onUpdate:modelValue":s[4]||(s[4]=t=>_.value=t),options:$},null,8,["modelValue"]),a(e(h),{modelValue:f.value,"onUpdate:modelValue":s[5]||(s[5]=t=>f.value=t),options:R},{"body-content":r(()=>[l("div",de,[(i(!0),m(E,null,C(e(T).options,t=>(i(),m("div",{key:t.name,class:"flex items-center justify-between"},[l("div",me,[a(e(z),{label:t.agent_name,image:t.user_image},null,8,["label","image"]),l("div",ue,D(t.agent_name),1)]),a(e(u),{disabled:!!e(o).doc?.users.find(g=>g.user===t.user),label:"Add",theme:"gray",variant:"outline",onClick:g=>N(t.user)},null,8,["disabled","onClick"])]))),128))])]),_:1},8,["modelValue"])]))}});export{ke as default};
//# sourceMappingURL=TeamSingle-3aaf7e2b.js.map
