import{o as i,b as m,a as t,q as v,j as o,w as h,y as e,n as C,g as k,h as x,ax as ne,al as re,x as E,A as p,D as le,t as u,ah as U,F as D,a6 as z,be as ie,M as q,bi as ce,l as W,J as de,C as N,am as V,c as T,p as K,f as ue,a3 as me,ap as he,an as _e,ao as j,aj as ge,H,a2 as pe,i as ye,br as ve,G as O}from"./index-683cf2d0.js";import{T as fe}from"./TextEditor-2f395107.js";import{u as F}from"./error-95942cf5.js";import{d as R}from"./notification-bcfdfaa4.js";import{I as be,_ as xe}from"./more-horizontal-09e3374d.js";import{_ as we}from"./PageTitle.vue_vue_type_script_setup_true_lang-f25ecf72.js";import{I as b}from"./iconify-ab660f87.js";import{D as $e}from"./Dropdown-cb3c7d7d.js";import{I as Ce}from"./edit-3-0cc4c723.js";import{_ as L}from"./Avatar.vue_vue_type_script_setup_true_lang-3a9f1ac4.js";const ke={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},Ie=t("circle",{cx:"12.1",cy:"12.1",r:"1"},null,-1),Se=[Ie];function Ae(a,s){return i(),m("svg",ke,Se)}const G={name:"lucide-dot",render:Ae},Be={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},Ne=t("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),Te=t("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),Ee=t("polyline",{points:"7 3 7 8 15 8"},null,-1),De=[Ne,Te,Ee];function Re(a,s){return i(),m("svg",Be,De)}const qe={name:"lucide-save",render:Re},Le={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},Me=t("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},null,-1),Pe=t("path",{d:"M3 3v5h5"},null,-1),Ve=[Me,Pe];function Ke(a,s){return i(),m("svg",Le,Ve)}const je={name:"lucide-rotate-ccw",render:Ke},He={class:"flex gap-2"},Oe=v({__name:"KnowledgeBaseArticleActionsEdit",emits:["save","cancel"],setup(a,{emit:s}){const c={label:"Save",theme:"gray",variant:"solid",onClick:()=>s("save")},r={label:"Cancel",theme:"gray",variant:"subtle",onClick:()=>s("cancel")};return(d,g)=>{const l=x("Button");return i(),m("div",He,[o(l,C(k(r)),{prefix:h(()=>[o(e(je),{class:"h-4 w-4"})]),_:1},16),o(l,C(k(c)),{prefix:h(()=>[o(e(qe),{class:"h-4 w-4"})]),_:1},16)])}}}),Fe={class:"flex gap-2"},Ge=v({__name:"KnowledgeBaseArticleActionsNew",emits:["create","discard"],setup(a,{emit:s}){const c={label:"Create",theme:"gray",variant:"solid",onClick:()=>s("create")},r={label:"Discard",theme:"gray",variant:"subtle",onClick:()=>s("discard")};return(d,g)=>{const l=x("Button");return i(),m("div",Fe,[o(l,C(k(r)),{prefix:h(()=>[o(e(b),{icon:"lucide:x",class:"h-4 w-4"})]),_:1},16),o(l,C(k(c)),{prefix:h(()=>[o(e(b),{icon:"lucide:check",class:"h-4 w-4"})]),_:1},16)])}}}),Ue={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},ze=ne('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),We=[ze];function Ye(a,s){return i(),m("svg",Ue,We)}const Ze={name:"lucide-trash-2",render:Ye},Je={class:"flex gap-2"},Qe=v({__name:"KnowledgeBaseArticleActionsView",props:{status:{type:String,required:!1,default:"Draft"}},emits:["delete","toggleEditMode","toggleStatus"],setup(a,{emit:s}){const r=re(a,"status"),d=E(!1),g=p(()=>({label:r.value==="Published"?"Unpublish":"Publish",theme:"gray",variant:"solid",onClick:()=>s("toggleStatus")})),l=[{label:"Edit",icon:Ce,onClick:()=>s("toggleEditMode")},{label:"Delete",icon:Ze,onClick:()=>d.value=!d.value}],y={title:"Delete",message:"Are you sure you want to delete? This action can not be reversed",icon:{name:"alert-triangle",appearance:"warning"},actions:[{label:"Confirm",theme:"red",variant:"solid",onClick:()=>s("delete")}]};return(I,S)=>{const A=x("Button");return i(),m("div",Je,[o(A,C(k(e(g))),null,16),o(e($e),{options:l},{default:h(()=>[o(A,{theme:"gray",variant:"ghost"},{icon:h(()=>[o(e(be),{class:"h-4 w-4"})]),_:1})]),_:1}),o(e(le),{modelValue:d.value,"onUpdate:modelValue":S[0]||(S[0]=w=>d.value=w),options:y},null,8,["modelValue"])])}}}),Xe={class:"mb-4.5 flex items-center justify-between"},et={class:"flex items-center gap-2"},tt={class:"text-base text-gray-800"},at={class:"flex items-center gap-2 text-sm text-gray-600"},ot=t("div",{class:"text-gray-600"},"Created",-1),st={class:"text-gray-800"},nt=t("div",{class:"text-base text-gray-300"},"|",-1),rt=t("div",{class:"text-gray-600"},"Modified",-1),lt={class:"text-gray-800"},it=t("div",{class:"text-base text-gray-300"},"|",-1),ct=t("div",{class:"text-gray-600"},"Likes",-1),dt={class:"text-gray-800"},ut=t("div",{class:"text-base text-gray-300"},"|",-1),mt=t("div",{class:"text-gray-600"},"Dislikes",-1),ht={class:"text-gray-800"},_t={class:"border-b pb-3"},gt=v({__name:"KnowledgeBaseArticleTopEdit",props:{categoryName:null,subCategoryName:null,title:null,authorFullname:null,authorImage:null,creation:null,modified:null,likes:{default:0},dislikes:{default:0}},emits:["update:title"],setup(a,{emit:s}){return(c,r)=>(i(),m(D,null,[t("div",Xe,[t("div",et,[o(e(L),{label:a.authorFullname,image:a.authorImage},null,8,["label","image"]),t("div",tt,u(a.authorFullname),1)]),t("div",at,[ot,t("div",st,u(e(R)(a.creation).fromNow()),1),nt,rt,t("div",lt,u(e(R)(a.modified).fromNow()),1),it,o(e(b),{icon:"lucide:thumbs-up",class:"h-4 w-4"}),ct,t("div",dt,u(a.likes),1),ut,o(e(b),{icon:"lucide:thumbs-down",class:"h-4 w-4"}),mt,t("div",ht,u(a.dislikes),1)])]),t("div",_t,[o(e(U),{placeholder:a.title,type:"text",onChange:r[0]||(r[0]=d=>s("update:title",d.target.value))},null,8,["placeholder"])])],64))}}),pt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},yt=t("path",{d:"m9 18 6-6-6-6"},null,-1),vt=[yt];function ft(a,s){return i(),m("svg",pt,vt)}const bt={name:"lucide-chevron-right",render:ft},xt={class:"mb-7 flex w-max items-center gap-1 rounded bg-gray-100 px-2 py-1"},wt={class:"text-base text-gray-600"},$t={class:"text-base text-gray-800"},Ct={class:"mb-4.5 flex items-center justify-between"},kt={class:"flex items-center gap-2"},It={class:"text-base text-gray-800"},St={class:"border-b pb-3"},At=v({__name:"KnowledgeBaseArticleTopNew",props:{categoryName:null,subCategoryName:null,title:null,authorFullname:null,authorImage:null},emits:["update:title"],setup(a,{emit:s}){return(c,r)=>(i(),m(D,null,[t("div",xt,[t("div",wt,u(a.categoryName),1),o(e(bt),{class:"h-3 w-3 text-gray-600"}),t("div",$t,u(a.subCategoryName),1)]),t("div",Ct,[t("div",kt,[o(e(L),{label:a.authorFullname,image:a.authorImage},null,8,["label","image"]),t("div",It,u(a.authorFullname),1)])]),t("div",St,[o(e(U),{type:"text",placeholder:"Title",onChange:r[0]||(r[0]=d=>s("update:title",d.target.value))})])],64))}}),Bt={class:"mb-8 flex items-center gap-1.5"},Nt={class:"border-b pb-3"},Tt={class:"text-3xl font-semibold text-gray-900"},Et=v({__name:"KnowledgeBaseArticleTopPublic",props:{subCategoryName:{type:String,required:!0},subCategoryId:{type:String,required:!0},title:{type:String,required:!0}},setup(a){const s=a,c=q(),{subCategoryId:r}=z(s);function d(){c.push({name:ce,params:{categoryId:r.value}})}return(g,l)=>{const y=x("RouterLink");return i(),m(D,null,[t("div",Bt,[o(y,{to:{name:e(ie)}},{default:h(()=>[o(e(b),{icon:"lucide:home",class:"h-4 w-4 text-gray-800"})]),_:1},8,["to"]),o(e(b),{icon:"lucide:chevron-right",class:"h-4 w-4 text-gray-600"}),t("div",{class:"cursor-pointer text-base font-medium text-gray-800",onClick:d},u(a.subCategoryName),1)]),t("div",Nt,[t("div",Tt,u(a.title),1)])],64)}}}),Dt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},Rt=t("path",{d:"M17 14V2"},null,-1),qt=t("path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z"},null,-1),Lt=[Rt,qt];function Mt(a,s){return i(),m("svg",Dt,Lt)}const Pt={name:"lucide-thumbs-down",render:Mt},Vt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},Kt=t("path",{d:"M7 10v12"},null,-1),jt=t("path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"},null,-1),Ht=[Kt,jt];function Ot(a,s){return i(),m("svg",Vt,Ht)}const Ft={name:"lucide-thumbs-up",render:Ot},Gt={class:"mb-4.5 flex items-center justify-between"},Ut={class:"flex items-center gap-1"},zt={class:"flex items-center gap-2"},Wt={class:"text-base text-gray-800"},Yt={class:"text-xs text-gray-800"},Zt={class:"flex items-center gap-2 text-gray-600"},Jt={class:"text-base"},Qt=t("div",{class:"text-base text-gray-300"},"|",-1),Xt={class:"text-base"},ea={class:"border-b pb-3"},ta={class:"text-3xl font-semibold text-gray-900"},aa=v({__name:"KnowledgeBaseArticleTopView",props:{categoryName:{type:String,required:!0},categoryId:{type:String,required:!0},subCategoryName:{type:String,required:!0},subCategoryId:{type:String,required:!0},title:{type:String,required:!0},status:{type:String,required:!0},authorFullname:{type:String,required:!0},authorImage:{type:String,required:!0},creation:{type:String,required:!0},modified:{type:String,required:!0},likes:{type:Number,required:!1,default:0},dislikes:{type:Number,required:!1,default:0}},setup(a){const s=a;return q(),z(s),(c,r)=>{const d=x("Badge");return i(),m(D,null,[t("div",Gt,[t("div",Ut,[t("div",zt,[o(e(L),{label:a.authorFullname,image:a.authorImage},null,8,["label","image"]),t("div",Wt,u(a.authorFullname),1)]),o(e(G),{class:"h-4 w-4 text-gray-600"}),t("div",Yt,u(e(R)(a.creation).short()),1),o(e(G),{class:"h-4 w-4 text-gray-600"}),o(d,{theme:a.status==="Published"?"green":"orange",variant:"subtle"},{default:h(()=>[W(u(a.status),1)]),_:1},8,["theme"])]),t("div",Zt,[o(e(Ft),{class:"h-4 w-4"}),t("div",Jt,u(a.likes),1),Qt,o(e(Pt),{class:"h-4 w-4"}),t("div",Xt,u(a.dislikes),1)])]),t("div",ea,[t("div",ta,u(a.title),1)])],64)}}}),oa={class:"flex h-full flex-col overflow-hidden"},sa={class:"overflow-auto"},na={class:"container m-auto my-12"},pa=v({__name:"KnowledgeBaseArticle",props:{articleId:{type:String,required:!0}},setup(a){const s=a,c=me(),r=q(),d=de(),g=s.articleId==="New",l=E(g),y=p(()=>n.data?.category.name||c.query.category),I=p(()=>n.data?.sub_category.name||c.query.subCategory),S=p(()=>n.data?.title||"New article"),A=p(()=>l.value?"Write something...":"Content is empty"),w=E(""),B=E(""),Y=p(()=>g?Ge:l.value?Oe:Qe),Z=p(()=>c.meta.public?Et:g?At:l.value?gt:aa),n=N({url:"helpdesk.helpdesk.doctype.hd_article.api.get_article",params:{name:s.articleId},auto:!g}),J=V({doctype:"HD Article Category",name:y.value,auto:!!c.query.category}),Q=V({doctype:"HD Article Category",name:I.value,auto:!!c.query.subCategory}),X=p(()=>({authorFullname:n.data?.author.full_name||d.userName,authorImage:n.data?.author.user_image||d.userImage,categoryId:y.value,categoryName:n.data?.category.category_name||J?.doc?.category_name,creation:n.data?.creation,dislikes:n.data?.not_helpful,likes:n.data?.helpful,modified:n.data?.modified,status:n.data?.status,subCategoryId:I.value,subCategoryName:n.data?.sub_category.category_name||Q?.doc?.category_name,title:n.data?.title})),ee=N({url:"frappe.client.insert",makeParams(){return{doc:{doctype:"HD Article",category:y.value,title:B.value,content:w.value}}},validate(f){if(!f.doc.title)throw"Title is required";if(!f.doc.content)throw"Content is required"},onSuccess(f){r.push({name:he,params:{articleId:f.name}}).then(()=>r.go(0))},onError:F({title:"Error creating article"})}),M=N({url:"frappe.client.set_value",onSuccess(){n.reload(),_e({title:"Article updated",icon:"check",iconClasses:"text-green-500"})},onError:F({title:"Error updating article"})}),te=N({url:"frappe.client.delete",makeParams(){return{doctype:"HD Article",name:s.articleId}},onSuccess(){r.replace(P.value)}}),ae=O(()=>{M.submit({doctype:"HD Article",name:n.data.name,fieldname:{content:w.value,title:B.value}})},300),oe=O(()=>{const f=n.data.status==="Published"?"Draft":"Published";M.submit({doctype:"HD Article",name:n.data.name,fieldname:"status",value:f})},300),P=p(()=>({name:j,params:{categoryId:y.value,subCategoryId:I.value}}));return(f,_)=>{const se=x("RouterLink");return i(),m("div",oa,[e(c).meta.public?K("",!0):(i(),T(e(we),{key:0},{title:h(()=>[o(e(xe),{items:[{label:e(n).data?.category.category_name,route:e(n).data?{name:e(ge),params:{categoryId:e(n).data?.category.name}}:""},{label:e(n).data?.sub_category.category_name,route:e(n).data?{name:e(j),params:{categoryId:e(n).data?.category.name,subCategoryId:e(n).data?.sub_category.name}}:""},{label:e(S),route:""}]},null,8,["items"])]),right:h(()=>[(i(),T(H(e(Y)),{status:e(n).data?.status,onCancel:_[0]||(_[0]=()=>e(n).reload().then(l.value=!l.value)),onCreate:e(ee).submit,onDelete:e(te).submit,onDiscard:_[1]||(_[1]=$=>e(r).push(e(P))),onSave:e(ae),onToggleEditMode:_[2]||(_[2]=$=>l.value=!l.value),onToggleStatus:e(oe)},null,40,["status","onCreate","onDelete","onSave","onToggleStatus"]))]),_:1})),t("div",sa,[t("div",na,[o(e(fe),{"bubble-menu":!0,content:e(n).data?.content,editable:l.value,"floating-menu":!0,placeholder:e(A),class:ue(["rounded",{shadow:l.value,"p-4":l.value}]),"editor-class":"prose-f",onChange:_[4]||(_[4]=$=>w.value=$)},{top:h(()=>[(i(),T(H(e(Z)),pe({title:B.value,"onUpdate:title":_[3]||(_[3]=$=>B.value=$)},e(X)),null,16,["title"]))]),_:1},8,["content","editable","placeholder","class"]),e(c).meta.public?(i(),T(se,{key:0,to:{name:e(ve)}},{default:h(()=>[o(e(ye),{label:"Still need help? Create a ticket",size:"md",theme:"gray",variant:"solid"},{suffix:h(()=>[W(" â†’ ")]),_:1})]),_:1},8,["to"])):K("",!0)])])])}}});export{G as I,pa as _};
//# sourceMappingURL=KnowledgeBaseArticle.vue_vue_type_script_setup_true_lang-d5b908b3.js.map
