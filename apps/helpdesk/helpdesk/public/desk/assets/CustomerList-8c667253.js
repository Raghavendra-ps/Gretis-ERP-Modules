import{_ as B,D as h,I as N,A as V,o as v,b as y,j as s,w as f,a as i,h as g,q as x,am as I,an as S,c as b,y as n,t as D,p as $,E as U,aq as E,x as C,af as q}from"./index-683cf2d0.js";import{_ as k}from"./Avatar.vue_vue_type_script_setup_true_lang-3a9f1ac4.js";import{f as H}from"./notification-bcfdfaa4.js";import{_ as z}from"./PageTitle.vue_vue_type_script_setup_true_lang-f25ecf72.js";import{_ as A}from"./plus-95486e06.js";import{_ as M}from"./LV.vue_vue_type_script_setup_true_lang-f637b6c9.js";import"./iconify-ab660f87.js";import{F as R}from"./FileUploader-75b4a926.js";import{u as F}from"./error-95942cf5.js";import"./EmptyMessage.vue_vue_type_script_setup_true_lang-84e0b3e7.js";import"./label-f823d750.js";const L={name:"NewCustomerDialog",components:{Dialog:h,Input:N},props:{modelValue:{type:Boolean,required:!0}},setup(u,{emit:o}){return{open:V({get:()=>u.modelValue,set:t=>{o("update:modelValue",t),t||o("close")}})}},data(){return{customer:"",domain:""}},methods:{addCustomer(){const u={customer_name:this.customer,domain:this.domain};this.$resources.newCustomer.submit({doc:{doctype:"HD Customer",...u}})},close(){this.customer="",this.domain="",this.$emit("close")}},resources:{newCustomer(){return{url:"frappe.client.insert",onSuccess:u=>{this.$router.push("/customers")}}}}},P={class:"space-y-4"},T={class:"space-y-1"},j={class:"space-y-1"},G={class:"float-right flex space-x-2"};function J(u,o,a,t,c,d){const p=g("Input"),l=g("Button"),e=g("Dialog");return v(),y("div",null,[s(e,{modelValue:t.open,"onUpdate:modelValue":o[3]||(o[3]=r=>t.open=r),options:{title:"Add New Customer",size:"sm"}},{"body-content":f(()=>[i("div",P,[i("div",T,[s(p,{modelValue:c.customer,"onUpdate:modelValue":o[0]||(o[0]=r=>c.customer=r),label:"Customer Name",type:"text",placeholder:"Tesla Inc."},null,8,["modelValue"])]),i("div",j,[s(p,{modelValue:c.domain,"onUpdate:modelValue":o[1]||(o[1]=r=>c.domain=r),label:"Domain",type:"text",placeholder:"eg: tesla.com, mycompany.com"},null,8,["modelValue"])]),i("div",G,[s(l,{label:"Add",theme:"gray",variant:"solid",onClick:o[2]||(o[2]=()=>{d.addCustomer(),d.close(),u.$router.go()})})])])]),_:1},8,["modelValue"])])}const K=B(L,[["render",J]]),O={class:"flex flex-col items-center gap-4 p-6"},Q={class:"text-xl font-medium text-gray-900"},W={class:"flex gap-2"},X=["onSubmit"],Y=x({__name:"CustomerDialog",props:{name:{type:String,required:!0}},setup(u){const o=u,a=V({get(){return t.doc?.domain},set(l){t.doc.domain=l}}),t=I({doctype:"HD Customer",name:o.name,auto:!0,setValue:{onSuccess(){S({title:"Customer updated",icon:"check",iconClasses:"text-green-500"})},onError:F({title:"Error updating customer"})}}),c=V(()=>({title:t.doc?.name,actions:[{label:"Save",theme:"gray",variant:"solid",onClick:()=>d()}]}));function d(){t.setValue.submit({domain:a.value})}function p(l){t.setValue.submit({image:l?.file_url||null})}return(l,e)=>{const r=g("Button"),m=g("Input");return v(),b(n(h),{options:n(c)},{"body-main":f(()=>[i("div",O,[i("div",Q,D(n(t).doc?.name),1),s(n(k),{size:"lg",label:n(t).doc?.name,image:n(t).doc?.image,class:"cursor-pointer hover:opacity-80"},null,8,["label","image"]),i("div",W,[s(n(R),{onSuccess:e[0]||(e[0]=_=>p(_))},{default:f(({uploading:_,openFileSelector:w})=>[s(r,{label:n(t).doc?.image?"Change photo":"Upload photo",loading:_,onClick:w},null,8,["label","loading","onClick"])]),_:1}),n(t).doc?.image?(v(),b(r,{key:0,label:"Remove photo",onClick:e[1]||(e[1]=_=>p(null))})):$("",!0)]),i("form",{class:"w-full",onSubmit:U(d,["prevent"])},[s(m,{modelValue:n(a),"onUpdate:modelValue":e[2]||(e[2]=_=>E(a)?a.value=_:null),label:"Domain",placeholder:"example.com"},null,8,["modelValue"])],40,X)])]),_:1},8,["options"])}}}),Z={class:"flex flex-col"},ee={class:"flex items-center gap-2"},oe={class:"line-clamp-1"},te={key:0},_e=x({__name:"CustomerList",setup(u){const o=C(!1),a=C(!1),t=C(null),c=[{label:"Name",key:"name",width:"w-80"},{label:"Domain",key:"domain",width:"w-80"}],d=H({doctype:"HD Customer",fields:["name","image","domain"],auto:!0,transform:l=>{for(const e of l)e.onClick=()=>p(e.name);return l}});q(()=>({title:"Customers"}));function p(l){t.value=l,a.value=!0}return(l,e)=>{const r=g("Button");return v(),y("div",Z,[s(z,{title:"Customers"},{right:f(()=>[s(r,{label:"New customer",theme:"gray",variant:"solid",onClick:e[0]||(e[0]=m=>o.value=!o.value)},{prefix:f(()=>[s(n(A),{class:"h-4 w-4"})]),_:1})]),_:1}),s(n(M),{columns:c,resource:n(d),class:"mt-2.5",doctype:"HD Customer"},{name:f(({data:m})=>[i("div",ee,[s(n(k),{label:m.name,image:m.image,size:"sm"},null,8,["label","image"]),i("div",oe,D(m.name),1)])]),_:1},8,["resource"]),s(K,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=m=>o.value=m),onClose:e[2]||(e[2]=m=>o.value=!1)},null,8,["modelValue"]),a.value?(v(),y("span",te,[s(Y,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=m=>a.value=m),name:t.value},null,8,["modelValue","name"])])):$("",!0)])}}});export{_e as default};
//# sourceMappingURL=CustomerList-8c667253.js.map
